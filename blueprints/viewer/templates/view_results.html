{% extends "base.html" %}

{% block title %}Search Results Viewer{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('viewer.static', filename='css/viewer.css') }}">
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">

        <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
        <div class="col-3 sidebar">
            <h4 class="header-title">Archives</h4>
            <ul class="list-unstyled">

                {% for r in archives %}
                    <li>
                        {% if r.id == current_id %}
                            <div class="archive-item active">
                                ðŸ“Œ {{ r.title }}<br>
                                <small>{{ r.search_period }}</small>
                            </div>
                        {% else %}
                            <a href="{{ url_for('viewer.view_archive', result_id=r.id) }}">
                                <div class="archive-item">
                                    ðŸ“„ {{ r.title }}<br>
                                    <small>{{ r.search_period }}</small>
                                </div>
                            </a>
                        {% endif %}
                    </li>
                {% endfor %}

            </ul>

            <!-- ï¼ˆä»»æ„ï¼‰å…¨å‰Šé™¤ -->
            <div class="sidebar-footer mt-4">
                <form
                    method="post"
                    action="{{ url_for('viewer.clear_archives') }}"
                    onsubmit="return confirm('ã™ã¹ã¦ã®æ¤œç´¢çµæžœã‚’å‰Šé™¤ã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ');"
                >
                    <button type="submit" class="btn btn-danger w-100">
                        ðŸ—‘ Clear Archives
                    </button>
                </form>
            </div>
        </div>

        <!-- ãƒ¡ã‚¤ãƒ³ã‚¨ãƒªã‚¢ -->
        <div class="col-9">
            <div id="resultsArea"></div>
        </div>

    </div>
</div>
{% endblock %}

{% block extra_js %}
<script id="resultsData" type="application/json">
    {{ results | tojson }}
</script>
<script src="{{ url_for('viewer.static', filename='js/viewer.js') }}"></script>
{% endblock %}
