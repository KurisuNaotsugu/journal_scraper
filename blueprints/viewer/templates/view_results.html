{% extends "base.html" %}

{% block title %}Search Results Viewer{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('viewer.static', filename='css/viewer.css') }}">
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">

        <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
        <div class="col-3 sidebar">
            <h4 class="header-title">Archives</h4>
            <ul class="list-unstyled">

                {% for fn in archive_files %}
                    <li>
                        {% if fn == current_file %}
                            <div class="archive-item active">
                                ðŸ“Œ {{ fn.replace('.json', '') }}
                            </div>
                        {% else %}
                            <a href="{{ url_for('viewer.view_page') }}?file={{ fn }}">
                                <div class="archive-item">
                                    ðŸ“„ {{ fn.replace('.json', '') }}
                                </div>
                            </a>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
            <div class="sidebar-footer mt-4">
                <form
                    method="post"
                    action="{{ url_for('viewer.clear_archives') }}"
                    onsubmit="return confirm('ã™ã¹ã¦ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã‚’å‰Šé™¤ã—ã¾ã™ã€‚ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ');"
                >
                    <button type="submit" class="btn btn-danger w-100">
                        ðŸ—‘ Clear Archives
                    </button>
                </form>
            </div>
        </div>

        <!-- ãƒ¡ã‚¤ãƒ³ã‚¨ãƒªã‚¢ -->
        <div class="col-9">
            <h2 class="my-4 header-title">Review Paper Publication</h2>
            <div id="resultsArea"></div>
        </div>

    </div>
</div>
{% endblock %}

{% block extra_js %}
<script id="resultsData" type="application/json">
    {{ results | tojson }}
</script>
<script src="{{ url_for('viewer.static', filename='js/viewer.js') }}"></script>
{% endblock %}
